# /etc/chrony/chrony.conf - Optimized GPS Chrony Server Configuration
# Based on professional NTP server configuration for public time serving

# Essential files
driftfile /var/lib/chrony/drift
pidfile /var/run/chronyd.pid

# Logging
logdir /var/log/chrony
log statistics measurements tracking

# Security - Disable monitoring to prevent DDoS
cmdport 0

# GPS References - Optimized polling
refclock SHM 0 offset 0.0 delay 0.0 refid GPS
refclock PPS /dev/pps0 refid PPS

# Upstream servers - Reduced list for better performance
server 152.2.133.55 iburst minpoll 6 maxpoll 10
server 152.2.133.54 iburst minpoll 6 maxpoll 10
server ntp-a.boulder.nist.gov iburst minpoll 6 maxpoll 10
server 130.207.244.240 iburst minpoll 6 maxpoll 10

# Access Control - Allow all networks (public time server)
allow 0.0.0.0/0
allow ::/0

# Performance tuning
maxupdateskew 100.0
maxdrift 500.0
maxchange 1000 1 2
maxchange 2000 1 2
maxchange 4000 1 2
maxchange 8000 1 2

# ARM/Raspberry Pi optimizations
maxupdateskew 50.0

# GPS-specific optimizations
minsamples 1
maxsamples 3

# Local stratum for time serving
local stratum 10
